{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '50172771-05af20c50899f4393bfb7f5e3';\n\nexport async function getImagesByQuery(query, page) {\n  try {\n  const res = await axios.get(BASE_URL, { params:   \n    {key: API_KEY ,\n    q: query,\n    page: page,\n    per_page: 15,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,} \n  });\n  return res.data;\n}\n  catch(error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Something went wrong. Please try again!',\n      position: 'bottomRight',\n    });\n    return null;\n  }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryList = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.gallery-load-btn');\n\nexport const lightbox = new SimpleLightbox(\n    '.gallery a'\n  );\n\nexport function createGallery(images) {\n    const markup = images.map(({\n    webformatURL, largeImageURL, tags, likes, views, comments, downloads,\n}) => `<li class=\"gallery-item-wrapper\">\n        <a class=\"gallery-image-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        </a>\n        <div class=\"data\">\n          <p class=\"data-item\">Likes<span class=\"data-item-numbers\">${likes}</span></p>\n          <p class=\"data-item\">Views<span class=\"data-item-numbers\">${views}</span></p>\n          <p class=\"data-item\">Comments<span class=\"data-item-numbers\">${comments}</span></p>\n          <p class=\"data-item\">Downloads<span class=\"data-item-numbers\">${downloads}</span></p>\n        </div>\n      </li>`)\n      .join('');\n      \n      galleryList.insertAdjacentHTML ('beforeend', markup);\n      lightbox.refresh();\n};\n\nexport function clearGallery(){\ngalleryList.innerHTML = '';\n}\n\nexport function showLoader(){\nloader.classList.remove('hidden');\n}\n\nexport function hideLoader(){\nloader.classList.add('hidden');    \n}\n\nexport function showLoadMoreButton(){\nloadMoreBtn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton(){\n  loadMoreBtn.classList.add('hidden');\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport {getImagesByQuery} from './js/pixabay-api';\nimport {createGallery, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton} from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.form-input');\nconst loadMoreBtn = document.querySelector('.gallery-load-btn');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalImg = 0;\nconst perPage = 15;\n\n// Scroll function\n\nfunction scrollGallery() {\n  const card = document.querySelector('.gallery-item-wrapper');\n  if (!card) return;\n\n  const { height: cardHeight } = card.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nform.addEventListener('submit', async event => {\n    event.preventDefault();\n  \n    const query = input.value.trim();\n  \n    if (query === '') {\n      iziToast.warning({\n        title: 'Warning',\n        message: 'Please enter a search field!',\n        position: 'topLeft',\n      });\n      return;\n    }\n  currentQuery = query;\n  currentPage = 1;\n  totalImg = 0;\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n\n      try{\n    const data = await getImagesByQuery(currentQuery, currentPage);\n\n        if (!data || !data.hits.length) {\n          iziToast.error({\n            title: 'Error',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'topRight',\n          });\n\n          return;\n        }\n    createGallery(data.hits);\n    totalImg = data.totalHits;\n\n    if (totalImg > perPage) {\n      showLoadMoreButton();\n    }\n  }\n      catch(error) {\n        iziToast.error({\n          title: 'Error',\n          message: 'Something went wrong.',\n          position: 'topRight',\n        });\n      }\n      finally {\n      hideLoader();\n      }\n  });\n\n  // Load more btn\n  loadMoreBtn.addEventListener('click', async () => {\n    currentPage += 1;\n    showLoader();\n\n    try {\n      const data = await getImagesByQuery(currentQuery, currentPage);\n\n      if (!data || !data.hits.length) {\n        hideLoadMoreButton();\n        iziToast.info({\n          title: 'Info',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n        });\n        return;\n      }\n      createGallery(data.hits);\n\n      // Scroll\n\n      scrollGallery();\n\n      const totalLoaded = document.querySelectorAll('.gallery-item-wrapper').length;\n    if (totalLoaded >= totalImg) {\n      hideLoadMoreButton();\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n    }\n      \n    } catch (error) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Something went wrong during loading more images.',\n        position: 'topRight',\n      });\n    } finally {\n      hideLoader();\n    }\n  });\n  "],"names":["BASE_URL","API_KEY","getImagesByQuery","query","page","axios","iziToast","galleryList","loader","loadMoreBtn","lightbox","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","currentPage","currentQuery","totalImg","perPage","scrollGallery","card","cardHeight","event","data"],"mappings":"owBAGA,MAAMA,EAAW,2BACXC,EAAU,qCAET,eAAeC,EAAiBC,EAAOC,EAAM,CAClD,GAAI,CAUJ,OATY,MAAMC,EAAM,IAAIL,EAAU,CAAE,OACtC,CAAC,IAAKC,EACN,EAAGE,EACH,KAAMC,EACN,SAAU,GACV,WAAY,QACZ,YAAa,aACb,WAAY,EAAM,CACtB,CAAG,GACU,IACb,MACe,CACX,OAAAE,EAAS,MAAM,CACb,MAAO,QACP,QAAS,0CACT,SAAU,aAChB,CAAK,EACM,IACR,CACH,CCxBA,MAAMC,EAAc,SAAS,cAAc,UAAU,EAC/CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,mBAAmB,EAEjDC,EAAW,IAAIC,EACxB,YACJ,EAEO,SAASC,EAAcC,EAAQ,CAClC,MAAMC,EAASD,EAAO,IAAI,CAAC,CAC3B,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAC/D,IAAM;AAAA,8CACwCL,CAAa;AAAA,4CACfD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,sEAGAC,CAAK;AAAA,sEACLC,CAAK;AAAA,yEACFC,CAAQ;AAAA,0EACPC,CAAS;AAAA;AAAA,YAEvE,EACL,KAAK,EAAE,EAERd,EAAY,mBAAoB,YAAaO,CAAM,EACnDJ,EAAS,QAAO,CACtB,CAEO,SAASY,GAAc,CAC9Bf,EAAY,UAAY,EACxB,CAEO,SAASgB,GAAY,CAC5Bf,EAAO,UAAU,OAAO,QAAQ,CAChC,CAEO,SAASgB,GAAY,CAC5BhB,EAAO,UAAU,IAAI,QAAQ,CAC7B,CAEO,SAASiB,GAAoB,CACpChB,EAAY,UAAU,OAAO,QAAQ,CACrC,CAEO,SAASiB,GAAoB,CAClCjB,EAAY,UAAU,IAAI,QAAQ,CACpC,CC3CA,MAAMkB,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAQ,SAAS,cAAc,aAAa,EAC5CnB,EAAc,SAAS,cAAc,mBAAmB,EAE9D,IAAIoB,EAAc,EACdC,EAAe,GACfC,EAAW,EACf,MAAMC,EAAU,GAIhB,SAASC,GAAgB,CACvB,MAAMC,EAAO,SAAS,cAAc,uBAAuB,EAC3D,GAAI,CAACA,EAAM,OAEX,KAAM,CAAE,OAAQC,CAAY,EAAGD,EAAK,sBAAqB,EAEzD,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QACd,CAAG,CACH,CAEAR,EAAK,iBAAiB,SAAU,MAAMS,GAAS,CAC3CA,EAAM,eAAc,EAEpB,MAAMjC,EAAQyB,EAAM,MAAM,KAAI,EAE9B,GAAIzB,IAAU,GAAI,CAChBG,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,+BACT,SAAU,SAClB,CAAO,EACD,MACD,CACHwB,EAAe3B,EACf0B,EAAc,EACdE,EAAW,EACXT,IACAI,IACAH,IAEI,GAAG,CACL,MAAMc,EAAO,MAAMnC,EAAiB4B,EAAcD,CAAW,EAEzD,GAAI,CAACQ,GAAQ,CAACA,EAAK,KAAK,OAAQ,CAC9B/B,EAAS,MAAM,CACb,MAAO,QACP,QAAS,2EACT,SAAU,UACtB,CAAW,EAED,MACD,CACLM,EAAcyB,EAAK,IAAI,EACvBN,EAAWM,EAAK,UAEZN,EAAWC,GACbP,GAEH,MACgB,CACXnB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,wBACT,SAAU,UACpB,CAAS,CACF,QACO,CACRkB,GACC,CACP,CAAG,EAGDf,EAAY,iBAAiB,QAAS,SAAY,CAChDoB,GAAe,EACfN,IAEA,GAAI,CACF,MAAMc,EAAO,MAAMnC,EAAiB4B,EAAcD,CAAW,EAE7D,GAAI,CAACQ,GAAQ,CAACA,EAAK,KAAK,OAAQ,CAC9BX,IACApB,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,6DACT,SAAU,UACpB,CAAS,EACD,MACD,CACDM,EAAcyB,EAAK,IAAI,EAIvBJ,IAEoB,SAAS,iBAAiB,uBAAuB,EAAE,QACtDF,IACjBL,IACApB,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,6DACT,SAAU,UAClB,CAAO,EAGF,MAAe,CACdA,EAAS,MAAM,CACb,MAAO,QACP,QAAS,mDACT,SAAU,UAClB,CAAO,CACP,QAAc,CACRkB,GACD,CACL,CAAG"}